# 테스트 코드 작성

<!-- TOC -->
* [테스트 코드 작성](#테스트-코드-작성)
  * [테스트 코드란?](#테스트-코드란-)
  * [테스트 코드 작성 이유](#테스트-코드-작성-이유)
    * [코드 정확성 검증](#코드-정확성-검증)
    * [리팩토링에 대한 불안감 해소](#리팩토링에-대한-불안감-해소)
    * [문서의 대체](#문서의-대체)
    * [디버깅 비용 단축](#디버깅-비용-단축)
  * [더 나은 테스트를 작성하기 위한 키워드](#더-나은-테스트를-작성하기-위한-키워드)
    * [한 문단에 한주제](#한-문단에-한주제)
    * [완벽하게 제어하기](#완벽하게-제어하기)
    * [테스트 환경의 독립성 보장, 테스트 간 독립성](#테스트-환경의-독립성-보장-테스트-간-독립성)
    * [Test Fixture, 클렌징](#test-fixture-클렌징)
    * [테스트 수행도 비용이다. 환경 통합하기](#테스트-수행도-비용이다-환경-통합하기)
    * [참고](#참고)
<!-- TOC -->

## 테스트 코드란? 

프로덕션 코드가 올바르게 동작하는지 확인하기 위해 작성하는 코드이다. 

## 테스트 코드 작성 이유

### 코드 정확성 검증

+ 작성한 코드가 의도한 대로 동작하는지 검증할 수 있다.
+ 특정 입력값에 대해 예상한 출력이 나오는지 확인 가능하며, 버그를 사전에 방지할 수 있다. 

### 리팩토링에 대한 불안감 해소

+ 리팩토링 시 기존 기능이 깨지는지 여부를 확인할 수 있다. 
+ 테스트 코드 작성 시, 당시의 기능을 만들기 위한 도구로 생각하지 말아야 하며 Testable한 코드를 작성해야 한다.

### 문서의 대체

+ 개발을 진행하다 보면 초기에 만든 문서들을 주기적으로 업데이트 하기 힘들다. 이와 같은 문서들은 협업 시 신뢰성을 보장받지 못한다. 
+ 잘 작성한 테스트 코드는 기능과 코드를 이해하는 데 도움을 주어 개발 문서를 대체 시킬 수 있다. (@DisplayName을 사용해서 이해를 돕는다.)
+ 실제로 테스트 코드를 통해 Swagger 문서 및 Spring Rest Docs를 작성해줌으로써, 문서화의 비용 절감도 가능하다. 

### 디버깅 비용 단축

+ 테스트 코드를 통해 버그 발생 비율을 줄일 수 있다.
+ 버그 발생 시, 테스트 코드를 실행하면 어떤 부분에서 문제가 발생했는지 빠르게 확인이 가능하다.

## 더 나은 테스트를 작성하기 위한 키워드

### 한 문단에 한주제

+ 테스트 코드 내부의 분기문이나 반복문처럼 고민을 요구하는 코드는 로직이 여러가지이기 때문에, 테스트 케이스가 여러개이다. 
+ 테스트 케이스 별로 각각의 테스트 코드를 작성하자.

### 완벽하게 제어하기

+ given 데이터를 만들 때 LocalDate.now(), LocalDateTime.now() 사용하지 않는 게 좋다.
+ 테스트 코드 실행 시마다 의도하는 바가 달라지기 때문에 영향을 끼친다. 
+ 제어할 수 없는 값을 제어 가능하게 변경하자.

### 테스트 환경의 독립성 보장, 테스트 간 독립성

+ 공유변수, 연관관계가 있는 테스트코드는 지양하자.

### Test Fixture, 클렌징

+ given절에 최대한 명시한다. 
+ 메서드를 추출할 때 필요한 파라미터만 명시한다. 
+ 별도의 data.sql 데이터를 추출하지 않는다. 
+ 단위테스트 내에서 모두 표현한다.

### 테스트 수행도 비용이다. 환경 통합하기

+ 더 자주, 더 빠르게 수행하는 환경을 구축하자. 
+ 공통 환경을 추출해서 통합 클래스를 만들어 서버 뜨는 횟수를 줄인다.

### 참고
https://www.inflearn.com/course/practical-testing-%EC%8B%A4%EC%9A%A9%EC%A0%81%EC%9D%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EA%B0%80%EC%9D%B4%EB%93%9C/dashboard   
https://tech.inflab.com/20230404-test-code/#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%98-%EC%9E%91%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-with-jest



